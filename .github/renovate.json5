{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",

  // Base configuration
  extends: ["config:recommended", ":semanticCommits"],

  // Timezone for scheduling (used for prCreation hours if needed)
  timezone: "America/Los_Angeles",

  // IMPORTANT: Explicitly set empty schedule to create PRs immediately
  // Without this, config:recommended applies a default schedule
  schedule: ["at any time"],

  // PR limits to avoid noise
  // Note: Set to 0 to disable rate limiting
  prHourlyLimit: 0,
  prConcurrentLimit: 0,

  // Branch naming
  branchPrefix: "deps/",

  // ============================================================================
  // Commit & PR Title format (MUST be conventional commits for squash merge)
  // ============================================================================
  // When auto-merge uses squash, the PR title becomes the commit message.
  // Both must follow conventional commits format for commitlint to pass.
  commitMessagePrefix: "chore(deps):",
  commitMessageAction: "update",

  // PR title MUST match commit format for squash merges to pass commitlint
  prTitle: "chore(deps): update {{{depName}}} to {{{newVersion}}}",

  // Prevent long release notes from being included in commit body
  // This avoids commitlint body-max-line-length failures on squash merge
  commitBody: "",
  commitBodyTable: false,

  // Labels for all PRs
  labels: ["dependencies", "renovate", "automerge"],

  // Create a dependency dashboard issue
  dependencyDashboard: true,
  dependencyDashboardTitle: "游닍 Renovate Dependency Dashboard",

  // Close the Dependency Dashboard issue if there are no more updates
  dependencyDashboardAutoclose: true,

  // Dependency dashboard approval for certain updates
  dependencyDashboardApproval: false,

  // Allow recreating PRs that were closed without merging
  // This ensures PRs can be recreated after branch deletion or config changes
  recreateWhen: "auto",

  // PR body template with useful information
  prBodyTemplate: "{{{header}}}{{{table}}}{{{warnings}}}{{{notes}}}{{{changelogs}}}{{{controls}}}{{{footer}}}",

  // Include release notes in PRs
  fetchChangeLogs: "pr",

  // Package-specific rules
  packageRules: [
    // ==========================================================================
    // 游릭 eero-api - Core API dependency (feature release)
    // ==========================================================================
    // Internal eero package - updates trigger minor version bump
    {
      matchPackageNames: ["eero-api"],
      matchManagers: ["pep621"],
      groupName: "eero-api",
      description: "游릭 eero-api update (triggers minor release)",

      // Auto-merge internal eero packages
      automerge: true,
      automergeType: "pr",
      automergeStrategy: "squash",

      // Labels for eero packages
      addLabels: ["eero-api", "feature"],

      // Prioritize this PR above others
      prPriority: 10,

      // Feature commit message (triggers minor version bump)
      commitMessagePrefix: "feat(deps):",
      commitMessageExtra: "{{newVersion}}",
      prTitle: "feat(deps): update eero-api to {{{newVersion}}}",

      // Add detailed PR body note
      prBodyNotes: [
        "## 游릭 eero-api Update",
        "",
        "This PR updates `eero-api`, the core API client for eero network communication.",
        "",
        "### Links",
        "- [eero-api on PyPI](https://pypi.org/project/eero-api/)",
        "- [eero-api Repository](https://github.com/fulviofreitas/eero-api)",
        "- [eero-api Releases](https://github.com/fulviofreitas/eero-api/releases)",
      ],
    },

    // ==========================================================================
    // 游릭 eero-prometheus-exporter - Metrics collection dependency (feature release)
    // ==========================================================================
    // Internal eero package - updates trigger minor version bump
    {
      matchPackageNames: ["eero-prometheus-exporter"],
      matchManagers: ["pep621"],
      groupName: "eero-prometheus-exporter",
      description: "游릭 eero-prometheus-exporter update (triggers minor release)",

      // Auto-merge internal eero packages
      automerge: true,
      automergeType: "pr",
      automergeStrategy: "squash",

      // Labels for eero packages
      addLabels: ["eero-prometheus-exporter", "feature"],

      // Prioritize this PR above others
      prPriority: 10,

      // Feature commit message (triggers minor version bump)
      commitMessagePrefix: "feat(deps):",
      commitMessageExtra: "{{newVersion}}",
      prTitle: "feat(deps): update eero-prometheus-exporter to {{{newVersion}}}",

      // Add detailed PR body note
      prBodyNotes: [
        "## 游릭 eero-prometheus-exporter Update",
        "",
        "This PR updates `eero-prometheus-exporter`, the embedded Prometheus metrics exporter.",
        "",
        "### Links",
        "- [eero-prometheus-exporter on PyPI](https://pypi.org/project/eero-prometheus-exporter/)",
        "- [eero-prometheus-exporter Repository](https://github.com/fulviofreitas/eero-prometheus-exporter)",
        "- [eero-prometheus-exporter Releases](https://github.com/fulviofreitas/eero-prometheus-exporter/releases)",
      ],
    },

    // ==========================================================================
    // 游리 Python dependencies: Group minor/patch updates
    // ==========================================================================
    {
      matchManagers: ["pip_requirements", "pip-compile", "pep621"],
      matchUpdateTypes: ["minor", "patch"],
      groupName: "python-minor-patch",
      description: "Python minor/patch updates (auto-merge)",
      automerge: true,
      automergeType: "pr",
      automergeStrategy: "squash",
      commitMessagePrefix: "chore(deps-python):",
      // PR title must match commit format for squash merge commitlint
      prTitle: "chore(deps-python): update python dependencies",
    },

    // ==========================================================================
    // 游리 Node.js dependencies: Group minor/patch updates
    // ==========================================================================
    {
      matchManagers: ["npm"],
      matchUpdateTypes: ["minor", "patch"],
      groupName: "npm-minor-patch",
      description: "npm minor/patch updates (auto-merge)",
      automerge: true,
      automergeType: "pr",
      automergeStrategy: "squash",
      commitMessagePrefix: "chore(deps-npm):",
      // PR title must match commit format for squash merge commitlint
      prTitle: "chore(deps-npm): update npm dependencies",
    },

    // ==========================================================================
    // 游릭 GitHub Actions: Auto-merge minor/patch updates
    // ==========================================================================
    {
      matchManagers: ["github-actions"],
      matchUpdateTypes: ["minor", "patch"],
      groupName: "github-actions",
      description: "GitHub Actions minor/patch updates (auto-merge)",
      automerge: true,
      automergeType: "pr",
      automergeStrategy: "squash",
      commitMessagePrefix: "chore(deps-actions):",
      // PR title must match commit format for squash merge commitlint
      prTitle: "chore(deps-actions): update github actions",
    },

    // ==========================================================================
    // 游댯 Major updates: Never auto-merge, require review
    // ==========================================================================
    {
      matchUpdateTypes: ["major"],
      description: "Major updates require manual review",
      automerge: false,
      addLabels: ["major-update", "needs-review"],
      reviewers: ["fulviofreitas"],
      commitMessagePrefix: "chore(deps-major):",
      // PR title must match commit format for squash merge commitlint
      prTitle: "chore(deps-major): update {{{depName}}} to {{{newVersion}}}",
    },

    // ==========================================================================
    // 游릮 Security updates: High priority, fast-track
    // ==========================================================================
    {
      matchDepTypes: ["devDependencies", "dependencies"],
      matchUpdateTypes: ["patch"],
      matchPackageNames: ["*"],
      prPriority: 20,
      description: "Security patches get high priority",
    },
  ],

  // Vulnerability alerts configuration (top-level, not inside packageRules)
  vulnerabilityAlerts: {
    enabled: true,
    labels: ["security", "critical", "automerge"],
    automerge: true,
  },
}
